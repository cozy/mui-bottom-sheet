{"version":3,"file":"mui-bottom-sheet.cjs.development.js","sources":["../src/util.ts","../src/BottomSheet.tsx"],"sourcesContent":["/**\n * Find the closest value in an array to a given value\n * @param goal target value\n * @param numbers array of numbers to search through\n */\nexport const closest = (goal: number, numbers: number[]) =>\n  numbers.reduce((prev, pos) =>\n    Math.abs(pos - goal) < Math.abs(prev - goal) ? pos : prev\n  );\n","import React, { FC, ReactElement, useEffect, useRef } from 'react';\nimport { a, useSpring, config } from 'react-spring';\nimport { useDrag } from 'react-use-gesture';\nimport useMeasure from 'react-use-measure';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { closest } from './util';\n\nexport interface bottomSheetOptions {\n  /**\n   * Show backdrop that darkens as the sheet is pulled up. Defaults to true.\n   *\n   * @default true\n   */\n  backdrop?: boolean;\n\n  /**\n   * Background component behind sheet. Requires at least two `peekHeights`.\n   * @default null\n   */\n  background?: ReactElement;\n\n  /**\n   * Current peek index if you want to control the component.\n   * @default 0;\n   */\n  currentIndex?: number;\n\n  /**\n   * Sheet height when in closed state.\n   * @default 100\n   */\n  defaultHeight: number;\n\n  /**\n   * Whether to go allow sheet to go full screen. If false, sheet will max out at largest peekHeight.\n   * @default true\n   */\n  fullHeight: boolean;\n\n  /**\n   * Completely hides the sheet when true.\n   * @default false\n   */\n  hidden: boolean | number;\n\n  /**\n   * Called when the user interacts and moves the bottomsheet to a new peek height\n   */\n  onIndexChange?: (index: number) => void;\n\n  /**\n   * Sheet will stop at certain heights to reveal more info.\n   * @default []\n   */\n  peekHeights?: number[];\n\n  /**\n   * Which spring config to use for snapping the sheet\n   * @default config.stiff\n   */\n  springConfig: Record<string, any>;\n\n  /**\n   * User styles for root, background and backdrop.\n   * @default {root:{},background:{},backdrop:{}}\n   */\n  styles?: bottomSheetStyles;\n\n  /**\n   * Threshold for over-dragging the sheet before snapping to closest height.\n   * @default 70\n   */\n  threshold: number;\n}\n\nexport interface BottomSheetProps extends Partial<bottomSheetOptions> {}\n\nexport interface bottomSheetStyles {\n  backdrop?: Record<string, any>;\n  background?: Record<string, any>;\n  root?: Record<string, any>;\n}\n\n/** Some sensible defaults */\nexport const defaultOptions = {\n  backdrop: true,\n  background: null,\n  defaultHeight: 100,\n  fullHeight: true,\n  hidden: false,\n  peekHeights: [],\n  springConfig: config.stiff,\n  styles: { root: {}, backdrop: {}, background: {} },\n  threshold: 70,\n};\n\nexport const BottomSheet: FC<BottomSheetProps> = props => {\n  /** Merge defaults and provided options */\n  const {\n    backdrop,\n    background,\n    currentIndex,\n    defaultHeight,\n    fullHeight,\n    hidden,\n    onIndexChange,\n    peekHeights,\n    springConfig,\n    styles: userStyles,\n    threshold,\n  } = {\n    ...defaultOptions,\n    ...props,\n  };\n\n  /** Generate stylesheet */\n  const styles: bottomSheetStyles = {\n    backdrop: {\n      position: 'fixed' as React.CSSProperties['position'],\n      bottom: 0,\n      left: 0,\n      right: 0,\n      top: 0,\n      zIndex: 1198,\n      backgroundColor: 'rgba(0,0,0,0.3)',\n    },\n    background: {\n      position: 'fixed' as React.CSSProperties['position'],\n      zIndex: 1199,\n      left: 0,\n      top: 0,\n      width: '100%',\n    },\n    root: {\n      background: '#fff',\n      boxShadow: '0 -10px 20px rgba(0,0,0,0.3)',\n      width: '100%',\n      minHeight: defaultHeight,\n      maxHeight: '100%',\n      position: 'fixed' as React.CSSProperties['position'],\n      left: 0,\n      top: 0,\n      zIndex: 1200,\n    },\n  };\n\n  /** generate stop position relative to window height */\n  const stopPosition = (relativeHeight: number) =>\n    window.innerHeight - relativeHeight;\n\n  /** Create array of possible stop positions */\n  const defaultPosition = stopPosition(defaultHeight);\n  const stops = [defaultPosition];\n\n  /** Track heights */\n  const [measureRef, { height }] = useMeasure({ polyfill: ResizeObserver });\n\n  let max = 0;\n  /** If it's taller than the window, clamp the stops at full screen */\n  if (height > window.innerHeight && fullHeight) {\n    stops.push(0);\n  }\n\n  /** If the el is smaller than the window and larger than the default, add it as a stop. */\n  if (height < window.innerHeight && height > defaultHeight) {\n    max = stopPosition(height);\n    stops.push(max);\n  }\n\n  /** Add peek heights if they are less than the max height.\n   * To don't mess with snap indexes we don't add the peek height if it already in the stops array\n   */\n  peekHeights?.forEach(peekHeight => {\n    if (peekHeight < height && peekHeight < window.innerHeight) {\n      if (!stops.includes(stopPosition(peekHeight))) {\n        stops.push(stopPosition(peekHeight));\n      }\n    }\n  });\n\n  /** By using stopPosition, y-axis is defined from top to bottom,\n  but in peekHeights context, y-axis is defined from bottom to top,\n  so we have to use descending sort here to have a proper matching between stops and snap indexes */\n  stops.sort((a, b) => b - a);\n\n  /** Track container scroll to prevent pulling when not at scrollTop */\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  /** Track animateable styles */\n  const [{ y }, set] = useSpring(() => ({\n    y: defaultPosition,\n  }));\n\n  /** Handle draging */\n  const bind = useDrag(\n    ({ last, cancel, movement: [, my], direction: [dx] }) => {\n      /** If the drag is feeling more horizontal than vertical, cancel */\n      if (dx < -0.8 || dx > 0.8) {\n        cancel && cancel();\n      }\n\n      /** Prevent drag if container isn't at top of scroll */\n      if (containerRef?.current?.scrollTop) {\n        return;\n      }\n\n      /**\n       * Cancel the drag if we either hit the top of the screen\n       * or a certain threshold above the max height (Defaults to 70px)\n       */\n      if (my < 0 || my < Math.min(...stops) - threshold) {\n        cancel && cancel();\n      }\n\n      /** On release, snap to closest stop position */\n      if (last) {\n        const lastPosition = closest(my, stops);\n        set({\n          y: lastPosition,\n          config: springConfig,\n        });\n\n        /** Call onIndexChange if it's set */\n        onIndexChange &&\n          onIndexChange(stops.findIndex(stop => stop === lastPosition));\n        return;\n      }\n\n      /** On each frame, set the y position */\n      set({\n        y: my,\n        config: { duration: 0 },\n      });\n    },\n    {\n      /**\n       * If the container has been scrolled, we want the sheet\n       * to begin pulling down once the users gets back to the\n       * top of the scroll. initialising the my position as the\n       * negative value of the current scroll sets it to zero\n       * when the user gets to the top of the scrollable area.\n       */\n      initial: () => [\n        0,\n        containerRef.current?.scrollTop\n          ? // @ts-ignore\n            -containerRef.current.scrollTop + Math.min(...stops)\n          : y.goal,\n      ],\n      bounds: { top: 0 },\n    }\n  );\n\n  /** If the hidden prop is true, hide the entire sheet off-screen */\n  useEffect(() => {\n    set({\n      y: hidden ? window.innerHeight + 30 : defaultPosition,\n      config: config.gentle,\n    });\n  }, [hidden, set, defaultPosition]);\n\n  /** Set display:none when the drawer is hidden. */\n  const display = y.to(py => (py < window.innerHeight + 30 ? 'block' : 'none'));\n\n  /**\n   * Lock the scroll of the bottom sheet while it hasn't been\n   * pulled to its maximum possible height.\n   */\n  const overflowY = y.to(v => (v > Math.min(...stops) ? 'hidden' : 'scroll'));\n\n  /** Aggregate main sheet props into an object for spreading */\n  const sheetStyle = {\n    y,\n    display,\n    overflowY,\n  };\n\n  /** Animated styles for the backdrop based off the y position */\n  const backdropActiveAt = [...stops]\n    .reverse()\n    .find(n => n !== defaultPosition && n < defaultPosition);\n\n  const backdropStyle = {\n    /** backdrop should only begin to fade in after first stop */\n    opacity: y.to([(backdropActiveAt as number) || 0, defaultPosition], [1, 0]),\n    /** Set display none when backdrop isn't show so you can interact with the page */\n    display: y.to(py => (py < defaultPosition && backdrop ? 'block' : 'none')),\n  };\n\n  /**\n   * Background is an image or carousel that slides up behind the main\n   * bottom sheet, similar to the venue images on Google maps.\n   */\n  const backgroundStyle = {\n    height: Math.min(...stops.filter(n => n > 0)),\n    y: y.to(\n      [...stops].reverse(),\n      stops.map((_stop, i, arr) =>\n        i === arr.length - 1 || i === arr.length - 2 ? window.innerHeight : 0\n      ),\n      'clamp'\n    ),\n  };\n\n  /**\n   * Handle controlled component changes\n   */\n  useEffect(() => {\n    if (currentIndex !== undefined && y.goal !== stops[currentIndex]) {\n      if (!stops[currentIndex]) {\n        console.warn('No stop exists for the index you set.');\n      }\n      set({\n        y: stops[currentIndex],\n        config: springConfig,\n      });\n    }\n  }, [currentIndex, stops, set, y, springConfig]);\n\n  return (\n    <>\n      <a.div\n        {...bind()}\n        ref={containerRef}\n        // @ts-ignore\n        style={{ ...styles.root, ...userStyles.root, y, ...sheetStyle }}\n      >\n        <div ref={measureRef}>{props.children}</div>\n      </a.div>\n      {background && (\n        <a.div\n          style={{\n            ...styles.background,\n            ...userStyles.background,\n            ...backgroundStyle,\n          }}\n          className=\"background\"\n        >\n          {background}\n        </a.div>\n      )}\n      <a.div\n        // @ts-ignore\n        style={{ ...styles.backdrop, ...userStyles.backdrop, ...backdropStyle }}\n      />\n    </>\n  );\n};\n"],"names":["closest","goal","numbers","reduce","prev","pos","Math","abs","defaultOptions","backdrop","background","defaultHeight","fullHeight","hidden","peekHeights","springConfig","config","stiff","styles","root","threshold","BottomSheet","props","currentIndex","onIndexChange","userStyles","position","bottom","left","right","top","zIndex","backgroundColor","width","boxShadow","minHeight","maxHeight","stopPosition","relativeHeight","window","innerHeight","defaultPosition","stops","useMeasure","polyfill","ResizeObserver","measureRef","height","max","push","forEach","peekHeight","includes","sort","a","b","containerRef","useRef","useSpring","y","set","bind","useDrag","last","cancel","movement","my","direction","dx","current","scrollTop","min","lastPosition","findIndex","stop","duration","initial","bounds","useEffect","gentle","display","to","py","overflowY","v","sheetStyle","backdropActiveAt","reverse","find","n","backdropStyle","opacity","backgroundStyle","filter","map","_stop","i","arr","length","undefined","console","warn","React","div","ref","style","children","className"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AAKO,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAACC,IAAD,EAAeC,OAAf;AAAA,SACrBA,OAAO,CAACC,MAAR,CAAe,UAACC,IAAD,EAAOC,GAAP;AAAA,WACbC,IAAI,CAACC,GAAL,CAASF,GAAG,GAAGJ,IAAf,IAAuBK,IAAI,CAACC,GAAL,CAASH,IAAI,GAAGH,IAAhB,CAAvB,GAA+CI,GAA/C,GAAqDD,IADxC;AAAA,GAAf,CADqB;AAAA,CAAhB;;AC8EP;;AACA,IAAaI,cAAc,GAAG;AAC5BC,EAAAA,QAAQ,EAAE,IADkB;AAE5BC,EAAAA,UAAU,EAAE,IAFgB;AAG5BC,EAAAA,aAAa,EAAE,GAHa;AAI5BC,EAAAA,UAAU,EAAE,IAJgB;AAK5BC,EAAAA,MAAM,EAAE,KALoB;AAM5BC,EAAAA,WAAW,EAAE,EANe;AAO5BC,EAAAA,YAAY,EAAEC,kBAAM,CAACC,KAPO;AAQ5BC,EAAAA,MAAM,EAAE;AAAEC,IAAAA,IAAI,EAAE,EAAR;AAAYV,IAAAA,QAAQ,EAAE,EAAtB;AAA0BC,IAAAA,UAAU,EAAE;AAAtC,GARoB;AAS5BU,EAAAA,SAAS,EAAE;AATiB,CAAvB;AAYP,IAAaC,WAAW,GAAyB,SAApCA,WAAoC,CAAAC,KAAK;AACpD;2CAcKd,gBACAc;MAbHb,iCAAAA;MACAC,mCAAAA;MACAa,qCAAAA;MACAZ,sCAAAA;MACAC,mCAAAA;MACAC,+BAAAA;MACAW,sCAAAA;MACAV,oCAAAA;MACAC,qCAAAA;MACQU,mCAARP;MACAE,kCAAAA;AAMF;;;AACA,MAAMF,MAAM,GAAsB;AAChCT,IAAAA,QAAQ,EAAE;AACRiB,MAAAA,QAAQ,EAAE,OADF;AAERC,MAAAA,MAAM,EAAE,CAFA;AAGRC,MAAAA,IAAI,EAAE,CAHE;AAIRC,MAAAA,KAAK,EAAE,CAJC;AAKRC,MAAAA,GAAG,EAAE,CALG;AAMRC,MAAAA,MAAM,EAAE,IANA;AAORC,MAAAA,eAAe,EAAE;AAPT,KADsB;AAUhCtB,IAAAA,UAAU,EAAE;AACVgB,MAAAA,QAAQ,EAAE,OADA;AAEVK,MAAAA,MAAM,EAAE,IAFE;AAGVH,MAAAA,IAAI,EAAE,CAHI;AAIVE,MAAAA,GAAG,EAAE,CAJK;AAKVG,MAAAA,KAAK,EAAE;AALG,KAVoB;AAiBhCd,IAAAA,IAAI,EAAE;AACJT,MAAAA,UAAU,EAAE,MADR;AAEJwB,MAAAA,SAAS,EAAE,8BAFP;AAGJD,MAAAA,KAAK,EAAE,MAHH;AAIJE,MAAAA,SAAS,EAAExB,aAJP;AAKJyB,MAAAA,SAAS,EAAE,MALP;AAMJV,MAAAA,QAAQ,EAAE,OANN;AAOJE,MAAAA,IAAI,EAAE,CAPF;AAQJE,MAAAA,GAAG,EAAE,CARD;AASJC,MAAAA,MAAM,EAAE;AATJ;AAjB0B,GAAlC;AA8BA;;AACA,MAAMM,YAAY,GAAG,SAAfA,YAAe,CAACC,cAAD;AAAA,WACnBC,MAAM,CAACC,WAAP,GAAqBF,cADF;AAAA,GAArB;AAGA;;;AACA,MAAMG,eAAe,GAAGJ,YAAY,CAAC1B,aAAD,CAApC;AACA,MAAM+B,KAAK,GAAG,CAACD,eAAD,CAAd;AAEA;;oBACiCE,UAAU,CAAC;AAAEC,IAAAA,QAAQ,EAAEC;AAAZ,GAAD;MAApCC;MAAcC,wBAAAA;;AAErB,MAAIC,GAAG,GAAG,CAAV;AACA;;AACA,MAAID,MAAM,GAAGR,MAAM,CAACC,WAAhB,IAA+B5B,UAAnC,EAA+C;AAC7C8B,IAAAA,KAAK,CAACO,IAAN,CAAW,CAAX;AACD;AAED;;;AACA,MAAIF,MAAM,GAAGR,MAAM,CAACC,WAAhB,IAA+BO,MAAM,GAAGpC,aAA5C,EAA2D;AACzDqC,IAAAA,GAAG,GAAGX,YAAY,CAACU,MAAD,CAAlB;AACAL,IAAAA,KAAK,CAACO,IAAN,CAAWD,GAAX;AACD;AAED;;;;;AAGAlC,EAAAA,WAAW,SAAX,IAAAA,WAAW,WAAX,YAAAA,WAAW,CAAEoC,OAAb,CAAqB,UAAAC,UAAU;AAC7B,QAAIA,UAAU,GAAGJ,MAAb,IAAuBI,UAAU,GAAGZ,MAAM,CAACC,WAA/C,EAA4D;AAC1D,UAAI,CAACE,KAAK,CAACU,QAAN,CAAef,YAAY,CAACc,UAAD,CAA3B,CAAL,EAA+C;AAC7CT,QAAAA,KAAK,CAACO,IAAN,CAAWZ,YAAY,CAACc,UAAD,CAAvB;AACD;AACF;AACF,GAND;AAQA;;;;AAGAT,EAAAA,KAAK,CAACW,IAAN,CAAW,UAACC,CAAD,EAAIC,CAAJ;AAAA,WAAUA,CAAC,GAAGD,CAAd;AAAA,GAAX;AAEA;;AACA,MAAME,YAAY,GAAGC,YAAM,CAAwB,IAAxB,CAA3B;AAEA;;mBACqBC,qBAAS,CAAC;AAAA,WAAO;AACpCC,MAAAA,CAAC,EAAElB;AADiC,KAAP;AAAA,GAAD;MAArBkB,kBAAAA;MAAKC;AAId;;;AACA,MAAMC,IAAI,GAAGC,uBAAO,CAClB;;;QAAGC,YAAAA;QAAMC,cAAAA;6BAAQC;QAAaC;8BAAKC;QAAYC;;AAC7C;AACA,QAAIA,EAAE,GAAG,CAAC,GAAN,IAAaA,EAAE,GAAG,GAAtB,EAA2B;AACzBJ,MAAAA,MAAM,IAAIA,MAAM,EAAhB;AACD;AAED;;;AACA,QAAIR,YAAJ,aAAIA,YAAJ,wCAAIA,YAAY,CAAEa,OAAlB,kDAAI,sBAAuBC,SAA3B,EAAsC;AACpC;AACD;AAED;;;;;;AAIA,QAAIJ,EAAE,GAAG,CAAL,IAAUA,EAAE,GAAG5D,IAAI,CAACiE,GAAL,OAAAjE,IAAI,EAAQoC,KAAR,CAAJ,GAAqBtB,SAAxC,EAAmD;AACjD4C,MAAAA,MAAM,IAAIA,MAAM,EAAhB;AACD;AAED;;;AACA,QAAID,IAAJ,EAAU;AACR,UAAMS,YAAY,GAAGxE,OAAO,CAACkE,EAAD,EAAKxB,KAAL,CAA5B;AACAkB,MAAAA,GAAG,CAAC;AACFD,QAAAA,CAAC,EAAEa,YADD;AAEFxD,QAAAA,MAAM,EAAED;AAFN,OAAD,CAAH;AAKA;;AACAS,MAAAA,aAAa,IACXA,aAAa,CAACkB,KAAK,CAAC+B,SAAN,CAAgB,UAAAC,IAAI;AAAA,eAAIA,IAAI,KAAKF,YAAb;AAAA,OAApB,CAAD,CADf;AAEA;AACD;AAED;;;AACAZ,IAAAA,GAAG,CAAC;AACFD,MAAAA,CAAC,EAAEO,EADD;AAEFlD,MAAAA,MAAM,EAAE;AAAE2D,QAAAA,QAAQ,EAAE;AAAZ;AAFN,KAAD,CAAH;AAID,GAvCiB,EAwClB;AACE;;;;;;;AAOAC,IAAAA,OAAO,EAAE;AAAA;;AAAA,aAAM,CACb,CADa,EAEb,0BAAApB,YAAY,CAACa,OAAb,0EAAsBC,SAAtB;AAEI,OAACd,YAAY,CAACa,OAAb,CAAqBC,SAAtB,GAAkChE,IAAI,CAACiE,GAAL,OAAAjE,IAAI,EAAQoC,KAAR,CAF1C,GAGIiB,CAAC,CAAC1D,IALO,CAAN;AAAA,KARX;AAeE4E,IAAAA,MAAM,EAAE;AAAE/C,MAAAA,GAAG,EAAE;AAAP;AAfV,GAxCkB,CAApB;AA2DA;;AACAgD,EAAAA,eAAS,CAAC;AACRlB,IAAAA,GAAG,CAAC;AACFD,MAAAA,CAAC,EAAE9C,MAAM,GAAG0B,MAAM,CAACC,WAAP,GAAqB,EAAxB,GAA6BC,eADpC;AAEFzB,MAAAA,MAAM,EAAEA,kBAAM,CAAC+D;AAFb,KAAD,CAAH;AAID,GALQ,EAKN,CAAClE,MAAD,EAAS+C,GAAT,EAAcnB,eAAd,CALM,CAAT;AAOA;;AACA,MAAMuC,OAAO,GAAGrB,CAAC,CAACsB,EAAF,CAAK,UAAAC,EAAE;AAAA,WAAKA,EAAE,GAAG3C,MAAM,CAACC,WAAP,GAAqB,EAA1B,GAA+B,OAA/B,GAAyC,MAA9C;AAAA,GAAP,CAAhB;AAEA;;;;;AAIA,MAAM2C,SAAS,GAAGxB,CAAC,CAACsB,EAAF,CAAK,UAAAG,CAAC;AAAA,WAAKA,CAAC,GAAG9E,IAAI,CAACiE,GAAL,OAAAjE,IAAI,EAAQoC,KAAR,CAAR,GAAyB,QAAzB,GAAoC,QAAzC;AAAA,GAAN,CAAlB;AAEA;;AACA,MAAM2C,UAAU,GAAG;AACjB1B,IAAAA,CAAC,EAADA,CADiB;AAEjBqB,IAAAA,OAAO,EAAPA,OAFiB;AAGjBG,IAAAA,SAAS,EAATA;AAHiB,GAAnB;AAMA;;AACA,MAAMG,gBAAgB,GAAG,UAAI5C,KAAJ,EACtB6C,OADsB,GAEtBC,IAFsB,CAEjB,UAAAC,CAAC;AAAA,WAAIA,CAAC,KAAKhD,eAAN,IAAyBgD,CAAC,GAAGhD,eAAjC;AAAA,GAFgB,CAAzB;AAIA,MAAMiD,aAAa,GAAG;AACpB;AACAC,IAAAA,OAAO,EAAEhC,CAAC,CAACsB,EAAF,CAAK,CAAEK,gBAA2B,IAAI,CAAjC,EAAoC7C,eAApC,CAAL,EAA2D,CAAC,CAAD,EAAI,CAAJ,CAA3D,CAFW;;AAGpB;AACAuC,IAAAA,OAAO,EAAErB,CAAC,CAACsB,EAAF,CAAK,UAAAC,EAAE;AAAA,aAAKA,EAAE,GAAGzC,eAAL,IAAwBhC,QAAxB,GAAmC,OAAnC,GAA6C,MAAlD;AAAA,KAAP;AAJW,GAAtB;AAOA;;;;;AAIA,MAAMmF,eAAe,GAAG;AACtB7C,IAAAA,MAAM,EAAEzC,IAAI,CAACiE,GAAL,OAAAjE,IAAI,EAAQoC,KAAK,CAACmD,MAAN,CAAa,UAAAJ,CAAC;AAAA,aAAIA,CAAC,GAAG,CAAR;AAAA,KAAd,CAAR,CADU;AAEtB9B,IAAAA,CAAC,EAAEA,CAAC,CAACsB,EAAF,CACD,UAAIvC,KAAJ,EAAW6C,OAAX,EADC,EAED7C,KAAK,CAACoD,GAAN,CAAU,UAACC,KAAD,EAAQC,CAAR,EAAWC,GAAX;AAAA,aACRD,CAAC,KAAKC,GAAG,CAACC,MAAJ,GAAa,CAAnB,IAAwBF,CAAC,KAAKC,GAAG,CAACC,MAAJ,GAAa,CAA3C,GAA+C3D,MAAM,CAACC,WAAtD,GAAoE,CAD5D;AAAA,KAAV,CAFC,EAKD,OALC;AAFmB,GAAxB;AAWA;;;;AAGAsC,EAAAA,eAAS,CAAC;AACR,QAAIvD,YAAY,KAAK4E,SAAjB,IAA8BxC,CAAC,CAAC1D,IAAF,KAAWyC,KAAK,CAACnB,YAAD,CAAlD,EAAkE;AAChE,UAAI,CAACmB,KAAK,CAACnB,YAAD,CAAV,EAA0B;AACxB6E,QAAAA,OAAO,CAACC,IAAR,CAAa,uCAAb;AACD;;AACDzC,MAAAA,GAAG,CAAC;AACFD,QAAAA,CAAC,EAAEjB,KAAK,CAACnB,YAAD,CADN;AAEFP,QAAAA,MAAM,EAAED;AAFN,OAAD,CAAH;AAID;AACF,GAVQ,EAUN,CAACQ,YAAD,EAAemB,KAAf,EAAsBkB,GAAtB,EAA2BD,CAA3B,EAA8B5C,YAA9B,CAVM,CAAT;AAYA,SACEuF,4BAAA,wBAAA,MAAA,EACEA,4BAAA,CAAChD,aAAC,CAACiD,GAAH,oBACM1C,IAAI;AACR2C,IAAAA,GAAG,EAAEhD;AACL;AACAiD,IAAAA,KAAK,eAAOvF,MAAM,CAACC,IAAd,EAAuBM,UAAU,CAACN,IAAlC;AAAwCwC,MAAAA,CAAC,EAADA;AAAxC,OAA8C0B,UAA9C;IAJP,EAMEiB,4BAAA,MAAA;AAAKE,IAAAA,GAAG,EAAE1D;GAAV,EAAuBxB,KAAK,CAACoF,QAA7B,CANF,CADF,EASGhG,UAAU,IACT4F,4BAAA,CAAChD,aAAC,CAACiD,GAAH;AACEE,IAAAA,KAAK,eACAvF,MAAM,CAACR,UADP,EAEAe,UAAU,CAACf,UAFX,EAGAkF,eAHA;AAKLe,IAAAA,SAAS,EAAC;GANZ,EAQGjG,UARH,CAVJ,EAqBE4F,4BAAA,CAAChD,aAAC,CAACiD,GAAH;AAAA;AACE;AACAE,IAAAA,KAAK,eAAOvF,MAAM,CAACT,QAAd,EAA2BgB,UAAU,CAAChB,QAAtC,EAAmDiF,aAAnD;GAFP,CArBF,CADF;AA4BD,CA3PM;;;;;"}