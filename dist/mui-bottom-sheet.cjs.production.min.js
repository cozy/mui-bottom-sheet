"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("react"),t=e(n),r=require("react-spring"),o=require("react-use-gesture"),i=e(require("react-use-measure")),a=require("@juggle/resize-observer");function u(){return(u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var c={backdrop:!0,background:null,defaultHeight:100,fullHeight:!0,hidden:!1,peekHeights:[],springConfig:r.config.stiff,styles:{root:{},backdrop:{},background:{}},threshold:70,disabledClosing:!1,snapPointSeekerMode:"close",skipAnimation:!1};exports.BottomSheet=function(e){var l=u({},c,e),s=l.backdrop,d=l.background,f=l.currentIndex,p=l.defaultHeight,g=l.fullHeight,h=l.hidden,b=l.onIndexChange,v=l.peekHeights,y=l.springConfig,k=l.styles,m=l.threshold,w=l.disabledClosing,x=l.snapPointSeekerMode;r.Globals.assign({skipAnimation:l.skipAnimation});var H={backdrop:{position:"fixed",bottom:0,left:0,right:0,top:0,zIndex:1198,backgroundColor:"rgba(0,0,0,0.3)"},background:{position:"fixed",zIndex:1199,left:0,top:0,width:"100%"},root:{background:"#fff",boxShadow:"0 -10px 20px rgba(0,0,0,0.3)",width:"100%",minHeight:p,maxHeight:"100%",position:"fixed",left:0,top:0,zIndex:1200}},M=function(e){return window.innerHeight-e},E=M(p),O=[E],j=i({polyfill:a.ResizeObserver}),C=j[0],I=j[1].height,q=0;I>window.innerHeight&&g&&O.push(0),I<window.innerHeight&&I>p&&(q=M(I),O.push(q)),null==v||v.forEach((function(e){e<I&&e<window.innerHeight&&(O.includes(M(e))||O.push(M(e)))})),O.sort((function(e,n){return n-e}));var z=n.useRef(null),P=r.useSpring((function(){return{y:E}})),S=P[0].y,N=P[1],A=o.useDrag((function(e){var n,t=e.last,r=e.cancel,o=e.movement[1],i=e.direction,a=i[0],u=i[1],c=e.event;if(null==c||c.stopPropagation(),(!(c&&c.type&&z)||function(e,n){for(var t=e;t&&t.parentNode;){if(t===n)return!0;t=t.parentNode}return!1}(c.target,z.current))&&((a<-.8||a>.8)&&r&&r(),null==z||null===(n=z.current)||void 0===n||!n.scrollTop)){if((o<0||o<Math.min.apply(Math,O)-m)&&r&&r(),w&&o>Math.max.apply(Math,O)&&r&&r(),t){var l=0;return"close"===x&&(s=o,l=O.reduce((function(e,n){return Math.abs(n-s)<Math.abs(e-s)?n:e}))),"next"===x&&(l=function(e,n,t){if(n>0){var r=[].concat(t).sort((function(e,n){return e-n}));return r.find((function(n){return n>=e}))||r[r.length-1]}var o=[].concat(t).sort((function(e,n){return n-e}));return o.find((function(n){return n<=e}))||o[o.length-1]}(o,u,O)),N({y:l,config:y}),void(b&&b(O.findIndex((function(e){return e===l}))))}var s;N({y:o,config:{duration:0}})}}),{initial:function(){var e;return[0,null!==(e=z.current)&&void 0!==e&&e.scrollTop?-z.current.scrollTop+Math.min.apply(Math,O):S.goal]},bounds:{top:0}});n.useEffect((function(){N({y:h?window.innerHeight+30:E,config:r.config.gentle})}),[h,N,E]);var T=S.to((function(e){return e<window.innerHeight+30?"block":"none"})),R=S.to((function(e){return e>Math.min.apply(Math,O)?"hidden":"scroll"})),_={y:S,display:T,overflowY:R},B=[].concat(O).reverse().find((function(e){return e!==E&&e<E})),D={opacity:S.to([B||0,E],[1,0]),display:S.to((function(e){return e<E&&s?"block":"none"}))},F={height:Math.min.apply(Math,O.filter((function(e){return e>0}))),y:S.to([].concat(O).reverse(),O.map((function(e,n,t){return n===t.length-1||n===t.length-2?window.innerHeight:0})),"clamp")};return n.useEffect((function(){void 0!==f&&S.goal!==O[f]&&(O[f]||console.warn("No stop exists for the index you set."),N({y:O[f],config:y}))}),[f,O,N,S,y]),t.createElement(t.Fragment,null,t.createElement(r.a.div,Object.assign({},A(),{ref:z,style:u({},H.root,k.root,{y:S},_)}),t.createElement("div",{ref:C},e.children)),d&&t.createElement(r.a.div,{style:u({},H.background,k.background,F),className:"background"},d),t.createElement(r.a.div,{style:u({},H.backdrop,k.backdrop,D)}))},exports.defaultOptions=c;
//# sourceMappingURL=mui-bottom-sheet.cjs.production.min.js.map
